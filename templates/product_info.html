<!DOCTYPE html>
<html lang="en">
{% load static %}
<head>

    <meta charset="UTF-8">

    <link rel="stylesheet"  href="{%  static  '/css/product_info.css'  %}" type="text/css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css">

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js">
</script>

<title>{{ object.title }}</title>
</head>

<body>

<div class="container">

<div class="row">

    <div class="col-md-5">
<div id="carousel-thumb" class="carousel slide carousel-fade carousel-thumbnails" data-ride="carousel">
  <div class="carousel-inner" role="listbox">
    <div class="carousel-item active">
     <img src="{{ object.thumbnail_image_url }}" class="d-block w-100" alt="...">
    </div>
     {% for elt in images %}
      {% if forloop.counter0 > 0 %}
        <div class="carousel-item"><img src="{{ elt.imageURL }}" class="d-block w-100" alt="slide {{ forloop.counter0 }}">></div>
      {% endif %}
    {% endfor %}

  </div>




  <a class="carousel-control-prev" href="#carousel-thumb" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carousel-thumb" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>

        <!--/.Controls-->
  <ol class="carousel-indicators">
    <li data-target="#carousel-thumb" data-slide-to="0" class="active"> <img class="d-block w-100" src="{{ object.thumbnail_image_url }}"
        class="img-fluid"></li>

      {% for elt in images %}
      {%  if forloop.counter0 > 0 %}
       <li data-target="#carousel-thumb" data-slide-to="{{ forloop.counter0 }}"><img class="d-block w-100" src="{{ elt.imageURL }}"
        class="img-fluid"></li>
       {% endif %}
    {% endfor %}
<!--    <li data-target="#carousel-thumb" data-slide-to="1"><img class="d-block w-100" src="https://mdbootstrap.com/img/Photos/Others/Carousel-thumbs/img%20(121).jpg"
        class="img-fluid"></li>
    <li data-target="#carousel-thumb" data-slide-to="2"><img class="d-block w-100" src="https://mdbootstrap.com/img/Photos/Others/Carousel-thumbs/img%20(31).jpg"
        class="img-fluid"></li>-->
  </ol>


</div>

    </div>

     <div class="col-md-7">
     <div class="row">
         <p class="newarrival text-center">NEW</p>
         <h2>{{ object.title }}</h2>

         <p class = "stars">
         {% if rating  <= 1 %}
          <img src="{% static 'images/1_star.png' %}" alt="Rating: 1 star" />

         {% elif rating  <= 2 %}
          <img src="{% static 'images/2_stars.png' %}" alt="Rating: 2 stars" />


         {% elif rating  <= 3 %}
          <img src="{% static 'images/3_stars.png' %}" alt="Rating: 3 stars" />


         {% elif rating  <= 4 %}
          <img src="{% static 'images/4_stars.png' %}" alt="Rating: 4 stars" />


         {% elif rating  <= 5 %}
          <img src="{% static 'images/5_stars.png' %}" alt="Rating: 5 stars" />

         {% endif %}
         {{ rating }}
         </p>
     </div>
     <div class = "row">
     <div class="col">
         <p class="price">
         USD ${{ object.price }}

         </p>







     <!-- Example single danger button -->
     <form class="variations-form">
     {% for name in variation_names %}
        <div class="form-group">
            <label class="btn-label">{{ name.variation_name }}:</label>
          <!--<button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown">
             <span class="selection"></span><span class="caret"></span>
          </button>-->

          <select name="variation{{ forloop.counter }}" class="form-control variations" id="variation{{ forloop.counter }}">
            <option value="" selected disabled>{{ name.variation_name }}</option>
          {% for key, value_list in variation_values.items %}
            {% if key == name.variation_name %}
             {% for value in value_list %}

              <option value="{{ value }}">{{ value }}</option>

              {% endfor %}
                {% endif %}
            {% endfor %}
          </select>


        </div>
        <br>
        {% endfor %}
     </form>
     </div>
     <div class="col">
     <div id="behind"><img class="image-url" src=""></div>
     </div>
     </div>




        <!-- Example single danger button -->
<!--         <p><b>Availability:</b> In stock</p>
         <p><b>Condition:</b> New</p>
         <p><b>Brand:</b> Unknown</p>-->



    </div>



</div>

<div class="row" id = "submit-row">
<div class="col">
</div>

<div class="col">

    <input id = "import-btn" class="btn btn-danger btn-lg" type="submit" name="btn" value="Log in with eBay">
</div>

<div class="col">
</div>

</div>
</div>


<script>
$(".dropdown-menu a").click(function(){

  $(this).parents(".btn-group").find('.selection').text($(this).text());
  $(this).parents(".btn-group").find('.selection').val($(this).text());

});

<!--$(document).ready(function () {-->

<!--  $('.form-control').change(function(){-->
<!--    if ($("#variation1").val())           {-->
<!--      var valueFrom = $('.variations option:selected').text();-->

<!--      $('#chosen-options').html(valueFrom).show('fast');-->
<!--    };-->
<!--  });-->

<!--});-->

$(document).ready(function () {

  $('.form-control').change(function(){
    if ($('#variation1').val()) {
      var valueFrom = $('.variations option:selected').map(function () {
        return $(this).val();
    }).get();

    var alltext = valueFrom.join("; ")

        $('#chosen-options').html(alltext).show('fast');


          $.ajax(
    {
        type:"GET",
        data:{
                 action:'options_chosen',
                 alltext: alltext
        },
        success: function( data )
        {
            $('.price').html("USD $" + data.price).show('fast');
            $('.image-url').attr('src', data.image_url);

        }
     });

    };
  });

});

$('#import-btn').click(function () {

        $.ajax (
   {

    type:"GET",
    data: {
            action: 'test_call',

    },
    success: function(data) {

        location.href = data;
        }

    })
});



</script>

<footer class="page-footer font-small blue pt-4">

  <!-- Footer Links -->
  <div class="container-fluid text-center text-md-left">

    <!-- Grid row -->
    <div class="row">

      <!-- Grid column -->
      <div class="col-md-6 mt-md-0 mt-3">

        <!-- Content -->
        <h5 class="text-uppercase">Important links:</h5>
        <p>Here you can see more information about our website:</p>

      </div>
      <!-- Grid column -->

      <hr class="clearfix w-100 d-md-none pb-3">

      <!-- Grid column -->
      <div class="col-md-3 mb-md-0 mb-3">

        <!-- Links -->
        <h5 class="text-uppercase">Links</h5>

        <ul class="list-unstyled">
          <li>
            <a href="/privacy_policy">Privacy policy</a>
          </li>

        </ul>

      </div>
      <!-- Grid column -->


      <!-- Grid column -->

    </div>
    <!-- Grid row -->

  </div>
  <!-- Footer Links -->

  <!-- Copyright -->
  <div class="footer-copyright text-center py-3">Â© 2020 Copyright:
    <a href="https://mdbootstrap.com/"> MDBootstrap.com</a>
  </div>
  <!-- Copyright -->

</footer>
</body>

<!--<div class="main-image-display">
 <img src = "{{ object.thumbnail_image_url }}" id="main-image">
</div>
$(this).text()
<div class="images-list-wrapper">

 <ul  class= "images-list" style="list-style-type:none">
    {% for elt in images.split %}
        <li class="thumbnail-elt"><button class="clicker"><img src="{{ elt }}" class="thumbnail"></button></li>
    {% endfor %}

 </ul>

</div>

</div>

<div class="price-container">
<h2>Price:</h2>
    {{ object.price }}
</div>
<div class="product-url">{{ object.productURL }}</div>

</div>
<script>
    $('.clicker').click(function(){
    var src_url =  $(this).find("img").attr( "src" );
    $('#main-image').attr('src', src_url);
    });
</script>
</body>-->
</html>
